
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pck3r Web Installer - Ubuntu 24.04</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      padding-top: 3rem;
      background-color: #121212;
      color: #e0e0e0;
    }
    .package-card {
      cursor: pointer;
      transition: box-shadow 0.3s ease;
      background-color: #1e1e1e;
      color: #e0e0e0;
      border: 1px solid #333;
    }
    .package-card:hover {
      box-shadow: 0 0 11px rgba(255, 255, 255, 0.2);
      background-color: #2a2a2a;
    }
    #logConsole {
      background-color: #212529;
      color: #f8f9fa;
      font-family: monospace;
      height: 200px;
      overflow-y: auto;
      padding: 1rem;
      border-radius: 0.375rem;
      white-space: pre-wrap;
    }
    input, .btn {
      background-color: #2a2a2a;
      color: #e0e0e0;
      border: 1px solid #444;
    }
    input::placeholder {
      color: #888;
    }
    .btn-primary {
      background-color: #0d6efd;
      border-color: #0d6efd;
    }
    .btn-primary:hover {
      background-color: #0b5ed7;
      border-color: #0a58ca;
    }
    .btn-outline-primary {
      color: #0d6efd;
      border-color: #0d6efd;
    }
    .btn-outline-primary:hover {
      background-color: #0d6efd;
      color: #fff;
    }
    .btn-outline-secondary {
      color: #6c757d;
      border-color: #6c757d;
    }
    .btn-outline-secondary:hover {
      background-color: #6c757d;
      color: #fff;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="mb-4 text-center">Pck3r Web Installer for Ubuntu 24.04</h1>

    <div class="row mb-4">
      <div class="col-md-8">
        <h3>Available Packages</h3>
        <div class="row" id="packageStore">
          <!-- Package cards inserted here -->
        </div>
      </div>
      <div class="col-md-4">
        <h3>Installation Log</h3>
        <div id="logConsole" aria-live="polite" aria-atomic="true"></div>
        <button id="clearLogBtn" class="btn btn-sm btn-danger mt-2">Clear Log</button>
      </div>
    </div>

    <div class="mb-4">
      <h3>Custom Package Installation</h3>
      <div class="input-group">
        <input type="text" id="customPackageInput" class="form-control" placeholder="Enter package name" aria-label="Custom package name" />
        <button class="btn btn-primary" id="installCustomBtn">Install</button>
      </div>
    </div>

    <div class="mb-4">
      <h3>System Commands</h3>
      <div class="btn-group" role="group" aria-label="System commands">
        <button class="btn btn-outline-primary" data-cmd="sudo apt update">Update</button>
        <button class="btn btn-outline-primary" data-cmd="sudo apt upgrade">Upgrade</button>
        <button class="btn btn-outline-primary" data-cmd="sudo apt update && sudo apt -y full-upgrade">Full Upgrade</button>
        <button class="btn btn-outline-secondary" id="clearTerminalBtn">Clear Terminal</button>
      </div>
    </div>
  </div>

  <script>
    const packages = [
      { name: "nodejs", description: "Node.js runtime", installCmd: `curl -fsSL https://deb.nodesource.com/setup_22.x | sudo -E bash - && sudo apt install -y nodejs` },
      { name: "ohmyzsh", description: "Oh My Zsh shell framework", installCmd: `sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"` },
      { name: "firefox", description: "Mozilla Firefox browser", installCmd: `sudo install -d -m 0755 /etc/apt/keyrings && wget -q https://packages.mozilla.org/apt/repo-signing-key.gpg -O- | sudo tee /etc/apt/keyrings/packages.mozilla.org.asc > /dev/null && echo "deb [signed-by=/etc/apt/keyrings/packages.mozilla.org.asc] https://packages.mozilla.org/apt mozilla main" | sudo tee -a /etc/apt/sources.list.d/mozilla.list > /dev/null && echo 'Package: *\nPin: origin packages.mozilla.org\nPin-Priority: 1000' | sudo tee /etc/apt/preferences.d/mozilla && sudo apt-get update && sudo apt-get install firefox` },
      { name: "google-chrome", description: "Google Chrome browser", installCmd: `wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb -O /tmp/google-chrome.deb && sudo apt install -y /tmp/google-chrome.deb` },
      { name: "steam", description: "Steam gaming platform", installCmd: `wget https://steamcdn-a.akamaihd.net/client/installer/steam.deb -O /tmp/steam.deb && sudo apt install -y /tmp/steam.deb` },
      { name: "discord", description: "Discord chat app", installCmd: `wget https://discordapp.com/api/download?platform=linux&format=deb -O /tmp/discord.deb && sudo apt install -y /tmp/discord.deb` },
      { name: "vscode", description: "Visual Studio Code editor", installCmd: `wget https://code.visualstudio.com/sha/download?build=stable&os=linux-deb-x64 -O /tmp/vscode.deb && sudo apt install -y /tmp/vscode.deb` },
      { name: "skype", description: "Skype communication app", installCmd: `wget https://go.skype.com/skypeforlinux-64.deb -O /tmp/skype.deb && sudo apt install -y /tmp/skype.deb` },
      { name: "zoom", description: "Zoom video conferencing", installCmd: `wget https://zoom.us/client/latest/zoom_amd64.deb -O /tmp/zoom.deb && sudo apt install -y /tmp/zoom.deb` },
      { name: "vlc", description: "VLC media player", installCmd: `sudo add-apt-repository ppa:videolan/stable-daily -y && sudo apt update && sudo apt install -y vlc` },
      { name: "virtualbox", description: "VirtualBox virtualization", installCmd: `wget https://download.virtualbox.org/virtualbox/debian/pool/main/o/virtualbox/virtualbox-7.0_7.0.18-162988~Ubuntu~noble_amd64.deb -O /tmp/virtualbox.deb && sudo apt install -y /tmp/virtualbox.deb` },
      { name: "wine", description: "Wine Windows compatibility layer", installCmd: `wget https://dl.winehq.org/wine-builds/ubuntu/dists/noble/winehq.key -O /tmp/winehq.key && sudo apt-key add /tmp/winehq.key && sudo apt-add-repository 'deb https://dl.winehq.org/wine-builds/ubuntu/ noble main' && sudo apt update && sudo apt install -y --install-recommends winehq-stable` }
    ];

    const logConsole = document.getElementById('logConsole');
    const packageStore = document.getElementById('packageStore');
    const clearLogBtn = document.getElementById('clearLogBtn');
    const installCustomBtn = document.getElementById('installCustomBtn');
    const customPackageInput = document.getElementById('customPackageInput');
    const clearTerminalBtn = document.getElementById('clearTerminalBtn');

    function appendLog(message) {
      const timestamp = new Date().toLocaleTimeString();
      logConsole.textContent += `[${timestamp}] ${message}\n`;
      logConsole.scrollTop = logConsole.scrollHeight;
    }

    async function installPackage(pkgName) {
      const pkg = packages.find(p => p.name === pkgName);
      if (!pkg) {
        appendLog(`Package ${pkgName} not found.`);
        return;
      }
      appendLog(`Starting installation of ${pkg.name}...`);
      try {
        const response = await fetch('/install', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ packageName: pkg.name, installCmd: pkg.installCmd })
        });
        const result = await response.json();
        if (result.success) {
          appendLog(`Installation of ${pkg.name} completed successfully.`);
          localStorage.setItem(`installed_${pkg.name}`, 'true');
        } else {
          appendLog(`Installation of ${pkg.name} failed: ${result.message}`);
        }
      } catch (error) {
        appendLog(`Installation error: ${error.message}`);
      }
    }

    async function installCustomPackage() {
      const pkgName = customPackageInput.value.trim();
      if (!pkgName) {
        appendLog('Please enter a package name.');
        return;
      }
      appendLog(`Starting installation of custom package: ${pkgName}`);
      try {
        const installCmd = `sudo apt install -y ${pkgName}`;
        const response = await fetch('/install', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ packageName: pkgName, installCmd })
        });
        const result = await response.json();
        if (result.success) {
          appendLog(`Installation of ${pkgName} completed successfully.`);
          localStorage.setItem(`installed_${pkgName}`, 'true');
        } else {
          appendLog(`Installation of ${pkgName} failed: ${result.message}`);
        }
      } catch (error) {
        appendLog(`Installation error: ${error.message}`);
      }
    }

    function clearLog() {
      logConsole.textContent = '';
    }

    function handleSystemCommand(cmd) {
      appendLog(`Run the following system command in your terminal:\n\n${cmd}`);
    }

    function createPackageCard(pkg) {
      const col = document.createElement('div');
      col.className = 'col-md-4 mb-3';
      col.innerHTML = `
        <div class="card package-card shadow-sm">
          <div class="card-body">
            <h5 class="card-title">${pkg.name}</h5>
            <p class="card-text">${pkg.description}</p>
            <button class="btn btn-primary install-btn" data-pkg="${pkg.name}">Install</button>
          </div>
        </div>
      `;
      packageStore.appendChild(col);
    }

    function init() {
      packages.forEach(createPackageCard);

      packageStore.addEventListener('click', (e) => {
        if (e.target.classList.contains('install-btn')) {
          const pkgName = e.target.getAttribute('data-pkg');
          installPackage(pkgName);
        }
      });

      clearLogBtn.addEventListener('click', clearLog);
      installCustomBtn.addEventListener('click', installCustomPackage);

      document.querySelectorAll('[data-cmd]').forEach(btn => {
        btn.addEventListener('click', () => {
          handleSystemCommand(btn.getAttribute('data-cmd'));
        });
      });

      clearTerminalBtn.addEventListener('click', () => {
        appendLog('Run the following command in your terminal:\n\nclear');
      });
    }

    window.onload = init;
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Simplest JavaScript for package installation with backend integration
    const packages = [
      { name: "nodejs", installCmd: `curl -fsSL https://deb.nodesource.com/setup_22.x | sudo -E bash - && sudo apt install -y nodejs` },
      { name: "ohmyzsh", installCmd: `sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"` },
      { name: "firefox", installCmd: `sudo install -d -m 0755 /etc/apt/keyrings && wget -q https://packages.mozilla.org/apt/repo-signing-key.gpg -O- | sudo tee /etc/apt/keyrings/packages.mozilla.org.asc > /dev/null && echo "deb [signed-by=/etc/apt/keyrings/packages.mozilla.org.asc] https://packages.mozilla.org/apt mozilla main" | sudo tee -a /etc/apt/sources.list.d/mozilla.list > /dev/null && echo 'Package: *\nPin: origin packages.mozilla.org\nPin-Priority: 1000' | sudo tee /etc/apt/preferences.d/mozilla && sudo apt-get update && sudo apt-get install firefox` },
      { name: "google-chrome", installCmd: `wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb -O /tmp/google-chrome.deb && sudo apt install -y /tmp/google-chrome.deb` },
      { name: "steam", installCmd: `wget https://steamcdn-a.akamaihd.net/client/installer/steam.deb -O /tmp/steam.deb && sudo apt install -y /tmp/steam.deb` },
      { name: "discord", installCmd: `wget https://discordapp.com/api/download?platform=linux&format=deb -O /tmp/discord.deb && sudo apt install -y /tmp/discord.deb` },
      { name: "vscode", installCmd: `wget https://code.visualstudio.com/sha/download?build=stable&os=linux-deb-x64 -O /tmp/vscode.deb && sudo apt install -y /tmp/vscode.deb` },
      { name: "skype", installCmd: `wget https://go.skype.com/skypeforlinux-64.deb -O /tmp/skype.deb && sudo apt install -y /tmp/skype.deb` },
      { name: "zoom", installCmd: `wget https://zoom.us/client/latest/zoom_amd64.deb -O /tmp/zoom.deb && sudo apt install -y /tmp/zoom.deb` },
      { name: "vlc", installCmd: `sudo add-apt-repository ppa:videolan/stable-daily -y && sudo apt update && sudo apt install -y vlc` },
      { name: "virtualbox", installCmd: `wget https://download.virtualbox.org/virtualbox/debian/pool/main/o/virtualbox/virtualbox-7.0_7.0.18-162988~Ubuntu~noble_amd64.deb -O /tmp/virtualbox.deb && sudo apt install -y /tmp/virtualbox.deb` },
      { name: "wine", installCmd: `wget https://dl.winehq.org/wine-builds/ubuntu/dists/noble/winehq.key -O /tmp/winehq.key && sudo apt-key add /tmp/winehq.key && sudo apt-add-repository 'deb https://dl.winehq.org/wine-builds/ubuntu/ noble main' && sudo apt update && sudo apt install -y --install-recommends winehq-stable` }
    ];

    const logConsole = document.getElementById('logConsole');
    const packageStore = document.getElementById('packageStore');
    const clearLogBtn = document.getElementById('clearLogBtn');
    const installCustomBtn = document.getElementById('installCustomBtn');
    const customPackageInput = document.getElementById('customPackageInput');
    const clearTerminalBtn = document.getElementById('clearTerminalBtn');

    function appendLog(message) {
      const timestamp = new Date().toLocaleTimeString();
      logConsole.textContent += `[${timestamp}] ${message}\n`;
      logConsole.scrollTop = logConsole.scrollHeight;
    }

    async function installPackage(pkgName) {
      const pkg = packages.find(p => p.name === pkgName);
      if (!pkg) {
        appendLog(`Package ${pkgName} not found.`);
        return;
      }
      appendLog(`Starting installation of ${pkg.name}...`);
      try {
        const response = await fetch('/install', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ packageName: pkg.name, installCmd: pkg.installCmd })
        });
        const result = await response.json();
        if (result.success) {
          appendLog(`Installation of ${pkg.name} completed successfully.`);
          localStorage.setItem(`installed_${pkg.name}`, 'true');
        } else {
          appendLog(`Installation of ${pkg.name} failed: ${result.message}`);
        }
      } catch (error) {
        appendLog(`Installation error: ${error.message}`);
      }
    }

    async function installCustomPackage() {
      const pkgName = customPackageInput.value.trim();
      if (!pkgName) {
        appendLog('Please enter a package name.');
        return;
      }
      appendLog(`Starting installation of custom package: ${pkgName}`);
      try {
        const installCmd = `sudo apt install -y ${pkgName}`;
        const response = await fetch('/install', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ packageName: pkgName, installCmd })
        });
        const result = await response.json();
        if (result.success) {
          appendLog(`Installation of ${pkgName} completed successfully.`);
          localStorage.setItem(`installed_${pkgName}`, 'true');
        } else {
          appendLog(`Installation of ${pkgName} failed: ${result.message}`);
        }
      } catch (error) {
        appendLog(`Installation error: ${error.message}`);
      }
    }

    function clearLog() {
      logConsole.textContent = '';
    }

    function handleSystemCommand(cmd) {
      appendLog(`Run the following system command in your terminal:\n\n${cmd}`);
    }

    function createPackageCard(pkg) {
      const col = document.createElement('div');
      col.className = 'col-md-4 mb-3';
      col.innerHTML = `
        <div class="card package-card shadow-sm">
          <div class="card-body">
            <h5 class="card-title">${pkg.name}</h5>
            <button class="btn btn-primary install-btn" data-pkg="${pkg.name}">Install</button>
          </div>
        </div>
      `;
      packageStore.appendChild(col);
    }

    function init() {
      packages.forEach(createPackageCard);

      packageStore.addEventListener('click', (e) => {
        if (e.target.classList.contains('install-btn')) {
          const pkgName = e.target.getAttribute('data-pkg');
          installPackage(pkgName);
        }
      });

      clearLogBtn.addEventListener('click', clearLog);
      installCustomBtn.addEventListener('click', installCustomPackage);

      document.querySelectorAll('[data-cmd]').forEach(btn => {
        btn.addEventListener('click', () => {
          handleSystemCommand(btn.getAttribute('data-cmd'));
        });
      });

      clearTerminalBtn.addEventListener('click', () => {
        appendLog('Run the following command in your terminal:\n\nclear');
      });
    }

    window.onload = init;
  </script>
</body>
</html>
